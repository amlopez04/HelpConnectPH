<% content_for :google_maps_script do %>
  <% if ENV['GOOGLE_MAPS_API_KEY'].present? %>
    <script>
      // Initialize Google Maps callback
      window.initGoogleMaps = function() {
        // Trigger a custom event when Google Maps is loaded
        window.dispatchEvent(new Event('google-maps-loaded'));
      };
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAPS_API_KEY'] %>&libraries=places&callback=initGoogleMaps" async defer></script>
  <% else %>
    <script>
      console.error('GOOGLE_MAPS_API_KEY is not set in environment variables')
    </script>
  <% end %>
<% end %>

<div class="max-w-4xl mx-auto">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">üìù Submit New Report</h1>
    <p class="text-gray-600">Report a community issue in your barangay</p>
  </div>

  <!-- Form Card -->
  <div class="bg-white rounded-lg shadow-lg p-8">
    <%= render 'form', report: @report %>
  </div>
</div>

