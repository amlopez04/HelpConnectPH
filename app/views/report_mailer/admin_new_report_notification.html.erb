<h2>New Report Submitted - Admin Review Required</h2>

<p>Hello Admin,</p>

<p>A new report has been submitted and requires your review for quality control:</p>

<div class="info-box">
  <h3 style="margin-top: 0; color: #1e40af;"><%= @report.title %></h3>
  <p><strong>Location:</strong> <%= @report.address %></p>
  <p><strong>Barangay:</strong> <%= @report.barangay.name %></p>
  <p><strong>Category:</strong> <%= @report.category.name %></p>
  <p><strong>Priority:</strong> <%= @report.priority.titleize %></p>
  <p><strong>Reported by:</strong> <%= @report.user.email %></p>
  <p><strong>Submitted:</strong> <%= @report.created_at.strftime("%B %d, %Y at %I:%M %p") %></p>
  
  <div style="margin: 15px 0;">
    <span class="status-badge status-<%= @report.status %>"><%= @report.status.titleize %></span>
    <span class="status-badge priority-<%= @report.priority %>"><%= @report.priority.titleize %> Priority</span>
  </div>
  
  <p><strong>Description:</strong></p>
  <p style="background-color: white; padding: 15px; border-radius: 4px; border: 1px solid #e2e8f0;"><%= @report.description %></p>
</div>

<% if @report.photos.attached? %>
  <p><strong>Photos:</strong> <%= @report.photos.count %> photo(s) attached</p>
<% end %>

<div style="background-color: #fef3c7; padding: 20px; border-radius: 6px; border-left: 4px solid #f59e0b; margin: 30px 0;">
  <h4 style="margin-top: 0; color: #92400e;">Quality Control Checklist</h4>
  <ul style="margin: 0;">
    <li><strong>Check for duplicates:</strong> Search similar reports in the same area</li>
    <li><strong>Verify legitimacy:</strong> Ensure report is genuine and not spam</li>
    <li><strong>Review content:</strong> Check description and photos for appropriateness</li>
    <li><strong>Monitor patterns:</strong> Watch for suspicious reporting patterns</li>
  </ul>
</div>

<% if @report.potential_duplicates.any? %>
<div style="background-color: #fee2e2; padding: 20px; border-radius: 6px; border-left: 4px solid #dc2626; margin: 30px 0;">
  <h4 style="margin-top: 0; color: #dc2626;">‚ö†Ô∏è Potential Duplicates Detected</h4>
  <p style="margin: 0;">Found <%= @report.potential_duplicates.count %> similar reports within 100 meters:</p>
  <ul style="margin: 10px 0 0 0;">
    <% @report.potential_duplicates.each do |duplicate| %>
      <li><strong>Report #<%= duplicate.id %>:</strong> <%= duplicate.title %> (<%= duplicate.status.titleize %>)</li>
    <% end %>
  </ul>
</div>
<% end %>

<% if @report.potential_spam? %>
<div style="background-color: #fee2e2; padding: 20px; border-radius: 6px; border-left: 4px solid #dc2626; margin: 30px 0;">
  <h4 style="margin-top: 0; color: #dc2626;">‚ö†Ô∏è Potential Spam Detected</h4>
  <p style="margin: 0;">This report has been flagged for potential spam based on:</p>
  <ul style="margin: 10px 0 0 0;">
    <li>User reporting frequency patterns</li>
    <li>Description length and content</li>
    <li>Reporting behavior analysis</li>
  </ul>
</div>
<% end %>

<div style="background-color: #dbeafe; padding: 20px; border-radius: 6px; border-left: 4px solid #3b82f6; margin: 30px 0;">
  <h4 style="margin-top: 0; color: #1e40af;">Admin Actions Available</h4>
  <ul style="margin: 0;">
    <li><strong>View Report:</strong> Click below to review full details</li>
    <li><strong>Edit Report:</strong> Modify content if needed</li>
    <li><strong>Delete Report:</strong> Remove if spam or inappropriate</li>
    <li><strong>Contact Reporter:</strong> Reach out if clarification needed</li>
  </ul>
</div>

<div style="background-color: #dbeafe; padding: 20px; border-radius: 6px; border-left: 4px solid #3b82f6; margin: 30px 0;">
  <h4 style="margin-top: 0; color: #1e40af;">Admin Actions Required</h4>
  <p style="margin: 0 0 15px 0;"><strong>This report requires your approval before it can be sent to the barangay captain.</strong></p>
  <div style="display: flex; gap: 10px; margin-top: 15px;">
    <a href="<%= approve_report_url(@report, host: Rails.application.config.action_mailer.default_url_options[:host]) %>" style="background-color: #10b981; color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; font-weight: bold; display: inline-block;">‚úÖ Approve Report</a>
    <a href="<%= reject_report_url(@report, host: Rails.application.config.action_mailer.default_url_options[:host]) %>" style="background-color: #ef4444; color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; font-weight: bold; display: inline-block;">‚ùå Reject Report</a>
    <a href="<%= report_url(@report, host: Rails.application.config.action_mailer.default_url_options[:host]) %>" style="background-color: #6b7280; color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; font-weight: bold; display: inline-block;">üëÅÔ∏è Review Details</a>
  </div>
</div>

<p style="margin-top: 30px; font-size: 14px; color: #64748b;">
  <strong>Report ID:</strong> #<%= @report.id %><br>
  <strong>System:</strong> Para√±aqueConnect Admin Dashboard<br>
  <strong>Action Required:</strong> Quality control review
</p>
