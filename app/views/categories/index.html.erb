<!-- Header -->
<div class="mb-6 flex justify-between items-center">
  <div>
    <h1 class="text-3xl font-bold text-gray-900">Report Categories</h1>
    <p class="text-gray-600 mt-2">Manage categories for community reports.</p>
  </div>
  <% if policy(Category).create? %>
    <%= link_to new_category_path, class: "bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition inline-flex items-center" do %>
      <span class="mr-2">âž•</span> New Category
    <% end %>
  <% end %>
</div>

<!-- Statistics -->
<div class="grid md:grid-cols-3 gap-6 mb-6">
  <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg shadow-lg p-6 text-white">
    <div class="text-sm opacity-90 mb-1">Total Categories</div>
    <div class="text-4xl font-bold"><%= @categories.count %></div>
  </div>
  <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow-lg p-6 text-white">
    <div class="text-sm opacity-90 mb-1">Active Reports</div>
    <div class="text-4xl font-bold"><%= Report.where.not(status: :closed).count rescue 0 %></div>
  </div>
  <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-lg shadow-lg p-6 text-white">
    <div class="text-sm opacity-90 mb-1">Categories with Reports</div>
    <div class="text-4xl font-bold"><%= @categories.select { |c| c.reports.any? }.count %></div>
  </div>
</div>

<!-- Categories List -->
<% if @categories.any? %>
  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    <% @categories.each do |category| %>
      <div class="bg-white rounded-lg shadow-md hover:shadow-lg transition overflow-hidden">
        <div class="p-6">
          <!-- Icon and Name -->
          <div class="flex items-center mb-4">
            <% if category.icon.present? %>
              <span class="text-4xl mr-3"><%= category.icon %></span>
            <% else %>
              <span class="text-4xl mr-3">ðŸ“‹</span>
            <% end %>
            <h3 class="text-xl font-bold text-gray-900"><%= category.name %></h3>
          </div>

          <!-- Description -->
          <% if category.description.present? %>
            <p class="text-gray-600 mb-4 text-sm"><%= truncate(category.description, length: 100) %></p>
          <% else %>
            <p class="text-gray-400 italic mb-4 text-sm">No description</p>
          <% end %>

          <!-- Stats -->
          <div class="bg-gray-50 rounded-lg p-3 mb-4">
            <div class="text-sm text-gray-600">
              <span class="font-semibold text-gray-900"><%= category.reports.count %></span> 
              <%= 'report'.pluralize(category.reports.count) %>
            </div>
          </div>

          <!-- Actions -->
          <div class="flex gap-2">
            <%= link_to "View", category, class: "flex-1 text-center bg-blue-100 text-blue-700 px-4 py-2 rounded-lg font-semibold hover:bg-blue-200 transition" %>
            <% if policy(category).edit? %>
              <%= link_to "Edit", edit_category_path(category), class: "flex-1 text-center bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-200 transition" %>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="bg-gray-50 rounded-lg p-12 text-center">
    <div class="text-6xl mb-4">ðŸ“‹</div>
    <p class="text-gray-600 text-lg mb-4">No categories yet.</p>
    <% if policy(Category).create? %>
      <%= link_to "Create First Category", new_category_path, class: "inline-block bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition" %>
    <% end %>
  </div>
<% end %>

